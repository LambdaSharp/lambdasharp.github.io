<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Setup LambdaSharp | &#955;# - Serverless .NET for AWS </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Setup LambdaSharp | &#955;# - Serverless .NET for AWS ">
    <meta name="generator" content="docfx 2.42.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    <meta property="docfx:newtab" content="true">
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/LambdaSharpLogo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p><img src="../images/LambdaSharpLogo.png" alt="λ#"></p>
<h1 id="setup-lambdasharp">Setup LambdaSharp</h1>
<h2 id="step-0-prerequisite">Step 0: Prerequisite</h2>
<p>To get started, make sure you have signed-up for an AWS account and downloaded the required tools.</p>
<ol>
<li><a href="https://portal.aws.amazon.com/billing/signup#/start">AWS Account</a></li>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html">AWS CLI</a></li>
<li><a href="https://www.microsoft.com/net/download">.NET Core 2.1+</a></li>
</ol>
<h2 id="step-1-installing-λ-cli">Step 1: Installing λ# CLI</h2>
<p>The λ# CLI can be installed as a global <code>dotnet</code> tool by running the <code>dotnet</code> tool installation command:</p>
<p><strong>Using PowerShell/Bash:</strong></p>
<pre><code class="lang-bash">dotnet tool install -g LambdaSharp.Tool
</code></pre>
<p>Alternatively, for λ# contributors, the CLI can be setup using the <a href="https://github.com/LambdaSharp/LambdaSharpTool">GitHub repository</a>. See the λ# contributor installation instructions below.</p>
<p>Once installed, validate that the command works by running it.</p>
<p><strong>Using PowerShell/Bash:</strong></p>
<pre><code class="lang-bash">lash
</code></pre>
<p>The following text should appear (or similar):</p>
<pre><code>LambdaSharp CLI (v0.5)

Project Home: https://github.com/LambdaSharp/LambdaSharpTool

Usage: lash [options] [command]

Options:
  -?|-h|--help  Show help information

Commands:
  build         Build LambdaSharp module
  config        Configure LambdaSharp CLI
  deploy        Deploy LambdaSharp module
  encrypt       Encrypt Value
  info          Show LambdaSharp information
  init          Initialize LambdaSharp deployment tier
  list          List deployed LambdaSharp modules
  new           Create new LambdaSharp module or function
  publish       Publish LambdaSharp module
  util          Miscellaneous AWS utilities

Run 'lash [command] --help' for more information about a command.
</code></pre>
<h2 id="step-2-configure-λ-cli">Step 2: Configure λ# CLI</h2>
<p>The λ# CLI must be configured before it can be used. The configuration step optionally creates needed resources for deploying λ# modules and captures deployment preferences.</p>
<p><strong>Using PowerShell/Bash:</strong></p>
<pre><code class="lang-bash">lash config
</code></pre>
<p>The λ# CLI can be configured for multiple CLI profiles using the <code>--cli-profile</code> option. When omitted, the <em>Default</em> CLI profile is assumed. The λ# CLI configuration options are stored in <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-paramstore.html">AWS System Manager Parameter Store</a>, so they can be shared across teams on the same AWS account.</p>
<h2 id="step-3-initialize-λ-deployment-tier">Step 3: Initialize λ# Deployment Tier</h2>
<p>The λ# CLI must initialize each deployment tier (e.g. <code>Test</code>, <code>Stage</code>, <code>Prod</code>, etc.) with the λ# Core module before additional modules can be deployed.</p>
<p><strong>Using PowerShell/Bash:</strong></p>
<pre><code class="lang-bash">lash init --tier Sandbox
</code></pre>
<p><strong>NOTE:</strong> This step must to be repeated for each deployment tier (e.g. <code>Test</code>, <code>Stage</code>, <code>Prod</code>, etc.).</p>
<p>Run the <code>list</code> command to confirm that all λ# modules were deployed successfully:</p>
<p><strong>Using PowerShell/Bash:</strong></p>
<pre><code class="lang-bash">lash list --tier Sandbox
</code></pre>
<p>The following text should appear (or similar):</p>
<pre><code>LambdaSharp CLI (v0.6) - List deployed LambdaSharp modules

Found 1 modules for deployment tier 'Default'

NAME                MODULE                  STATUS             DATE
LambdaSharp-Core    LambdaSharp.Core:0.6    UPDATE_COMPLETE    2019-04-05 10:36:49

Done (finished: 1/17/2019 3:09:22 PM; duration: 00:00:03.5455994)
</code></pre>
<h2 id="optional-define-environment-variables">Optional: Define Environment Variables</h2>
<p>The following environment variables are checked when their corresponding options are omitted from the λ# command line.</p>
<ul>
<li><code>LAMBDASHARP_TIER</code>: Replaces the need for the <code>--tier</code> option.</li>
<li><code>LAMBDASHARP_PROFILE</code>: Replaces the need for the <code>--cli-profile</code> option.</li>
</ul>
<p><strong>Using PowerShell:</strong></p>
<pre><code class="lang-powershell">New-Variable -Name LAMBDASHARP_TIER -Value Sandbox
</code></pre>
<p><strong>Using Bash:</strong></p>
<pre><code class="lang-bash">export LAMBDASHARP_TIER=Sandbox
</code></pre>
<h2 id="optional-customize-lambdasharp-core-settings">Optional: Customize LambdaSharp Core Settings</h2>
<p>The following λ# Core module settings can be adjusted in the AWS console by updating the deployed CloudFormation stack.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LoggingStreamRetentionPeriod</code></td>
<td>How long logging stream entries are kept before they are lost</td>
<td>24</td>
</tr>
<tr>
<td><code>DefaultSecretKeyRotationEnabled</code></td>
<td>Rotate KMS key automatically every 365 days</td>
<td>false</td>
</tr>
</tbody>
</table>
<h2 id="optional-add-s3-module-locations">Optional: Add S3 Module Locations</h2>
<p>The following λ# CLI settings can be adjusted in the AWS console by accessing the Parameter Store in the Systems Manager.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/LambdaSharpTool/${CLI Profile}/ModuleBucketNames</code></td>
<td>Comma-separated list of S3 bucket names used by the CLI to find modules</td>
<td><code>${DeploymentBucket},lambdasharp-${AWS::Region}</code></td>
</tr>
</tbody>
</table>
<h2 id="optional-subscribe-to-errorreporttopic-topic">Optional: Subscribe to <code>ErrorReportTopic</code> Topic</h2>
<p>The λ# Core module analyzes the output of all deployed functions. When an issue occurs, the Core module sends a notification on the SNS <code>ErrorReportTopic</code>.</p>
<h2 id="optional-setup-rollbar-integration">Optional: Setup Rollbar Integration</h2>
<p>The λ# Core module can optionally be configured to send errors and warnings to <a href="https://rollbar.com/">Rollbar</a>. To enable this functionality, the λ# Core module needs the <em>read</em> and <em>write</em> access tokens for the account, which can be found in the <em>Account Settings</em> page.</p>
<p>The λ# Core module expects the access tokens to be encrypted, which can easily be done with the <a href="../cli/Tool-Encrypt.html"><code>lash encrypt</code></a> command.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RollbarReadAccessToken</code></td>
<td>Account-level token for read operations</td>
<td>&quot;&quot;</td>
</tr>
<tr>
<td><code>RollbarWriteAccessToken</code></td>
<td>Account-level token for write operations</td>
<td>&quot;&quot;</td>
</tr>
<tr>
<td><code>RollbarProjectPrefix</code></td>
<td>Optional prefix when creating Rollbar projects</td>
<td>&quot;&quot;</td>
</tr>
</tbody>
</table>
<h1 id="for-λ-contributors-installing-λ-from-github">For λ# Contributors: Installing λ# from GitHub</h1>
<p>λ# is distributed as <a href="https://github.com/LambdaSharp/LambdaSharpTool">GitHub repository</a>. Switch to your preferred folder for Git projects and create a clone of the λ# repository.</p>
<p><strong>Using PowerShell/Bash:</strong></p>
<pre><code class="lang-bash">git clone https://github.com/LambdaSharp/LambdaSharpTool.git
</code></pre>
<p>Define the <code>LAMBDASHARP</code> environment variable to point to the folder of the <code>LambdaSharpTool</code> clone. Furthermore, define <code>lash</code> as an alias to invoke the λ# CLI. The following script assumes λ# was cloned into the <code>/Repos/LambdaSharpTool</code> directory.</p>
<p><strong>Using PowerShell:</strong></p>
<pre><code class="lang-powershell">New-Variable -Name LAMBDASHARP -Value \Repos\LambdaSharpTool
function lash {
  dotnet run -p $LAMBDASHARP\src\LambdaSharp.Tool\LambdaSharp.Tool.csproj -- $args
}
</code></pre>
<p><strong>Using Bash:</strong></p>
<pre><code class="lang-bash">export LAMBDASHARP=/Repos/LambdaSharpTool
alias lash=&quot;dotnet run -p $LAMBDASHARP/src/LambdaSharp.Tool/LambdaSharp.Tool.csproj --&quot;
</code></pre>
<p><strong>IMPORTANT:</strong> make sure to always use your  <code>lash</code> alias instead of the <code>lash</code> command.</p>
<p>In addition, you need to run <code>Scripts/set-lash-version.sh</code> to set required environment variables for building the project file. This script sets the <code>LAMBDASHARP_VERSION_PREFIX</code>, <code>LAMBDASHARP_VERSION_SUFFIX</code>, and <code>LAMBDASHARP_VERSION</code> environment variables.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
